<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.51">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>位运算基本操作与常用技巧 | database of memory</title><meta name="description" content="study anything and life record">
    <link rel="modulepreload" href="/assets/app.05a3b675.js"><link rel="modulepreload" href="/assets/bitwise_operation.html.14083699.js"><link rel="modulepreload" href="/assets/bitwise_operation.html.16b2f453.js"><link rel="prefetch" href="/assets/index.html.90ecd5b3.js"><link rel="prefetch" href="/assets/index.html.c351a0de.js"><link rel="prefetch" href="/assets/cache_pattern.html.b81430a1.js"><link rel="prefetch" href="/assets/docker_tech.html.3107b2ed.js"><link rel="prefetch" href="/assets/k3s.html.8a19a9cd.js"><link rel="prefetch" href="/assets/k3s_k8s_ingress.html.01feb931.js"><link rel="prefetch" href="/assets/linux_namespace.html.98c41c19.js"><link rel="prefetch" href="/assets/python_checklist.html.1b364115.js"><link rel="prefetch" href="/assets/python_env_manage.html.94d16673.js"><link rel="prefetch" href="/assets/gevent.html.29cb6155.js"><link rel="prefetch" href="/assets/index.html.f54a32f5.js"><link rel="prefetch" href="/assets/index.html.c43566f7.js"><link rel="prefetch" href="/assets/sort_1.html.9ac97887.js"><link rel="prefetch" href="/assets/abstract_factory.html.6a25383c.js"><link rel="prefetch" href="/assets/factory_method.html.aa747088.js"><link rel="prefetch" href="/assets/index.html.2611fb78.js"><link rel="prefetch" href="/assets/adapter.html.836a0f06.js"><link rel="prefetch" href="/assets/404.html.c038a05a.js"><link rel="prefetch" href="/assets/index.html.993b265a.js"><link rel="prefetch" href="/assets/index.html.6c4a3bba.js"><link rel="prefetch" href="/assets/index.html.387c9870.js"><link rel="prefetch" href="/assets/index.html.bb567e9c.js"><link rel="prefetch" href="/assets/index.html.cf2aa61e.js"><link rel="prefetch" href="/assets/index.html.13f87c97.js"><link rel="prefetch" href="/assets/index.html.f30f905c.js"><link rel="prefetch" href="/assets/index.html.d454f1c1.js"><link rel="prefetch" href="/assets/index.html.403b3f90.js"><link rel="prefetch" href="/assets/index.html.58970d83.js"><link rel="prefetch" href="/assets/index.html.06b9713b.js"><link rel="prefetch" href="/assets/index.html.1ecb7a44.js"><link rel="prefetch" href="/assets/index.html.4c9d6777.js"><link rel="prefetch" href="/assets/index.html.e85e7e11.js"><link rel="prefetch" href="/assets/index.html.3c39c932.js"><link rel="prefetch" href="/assets/index.html.203d92a2.js"><link rel="prefetch" href="/assets/index.html.a7873cec.js"><link rel="prefetch" href="/assets/index.html.a84c358a.js"><link rel="prefetch" href="/assets/index.html.5b79ad83.js"><link rel="prefetch" href="/assets/index.html.444a65e1.js"><link rel="prefetch" href="/assets/index.html.bc5d823d.js"><link rel="prefetch" href="/assets/index.html.b5c6e96a.js"><link rel="prefetch" href="/assets/index.html.104e76f5.js"><link rel="prefetch" href="/assets/index.html.955e44e7.js"><link rel="prefetch" href="/assets/cache_pattern.html.a41f8ea8.js"><link rel="prefetch" href="/assets/docker_tech.html.411efa45.js"><link rel="prefetch" href="/assets/k3s.html.5bfa2249.js"><link rel="prefetch" href="/assets/k3s_k8s_ingress.html.b04dfebe.js"><link rel="prefetch" href="/assets/linux_namespace.html.4ad9a9f5.js"><link rel="prefetch" href="/assets/python_checklist.html.90b2ef08.js"><link rel="prefetch" href="/assets/python_env_manage.html.ff1c945a.js"><link rel="prefetch" href="/assets/gevent.html.baa1bf9f.js"><link rel="prefetch" href="/assets/index.html.9b083b9c.js"><link rel="prefetch" href="/assets/index.html.78dba206.js"><link rel="prefetch" href="/assets/sort_1.html.3f9d141b.js"><link rel="prefetch" href="/assets/abstract_factory.html.adc65673.js"><link rel="prefetch" href="/assets/factory_method.html.1d34a66f.js"><link rel="prefetch" href="/assets/index.html.49ae710c.js"><link rel="prefetch" href="/assets/adapter.html.69520261.js"><link rel="prefetch" href="/assets/404.html.04ebd133.js"><link rel="prefetch" href="/assets/index.html.9822ee15.js"><link rel="prefetch" href="/assets/index.html.c357ba71.js"><link rel="prefetch" href="/assets/index.html.7dfef4b6.js"><link rel="prefetch" href="/assets/index.html.703b2cad.js"><link rel="prefetch" href="/assets/index.html.7cc9c811.js"><link rel="prefetch" href="/assets/index.html.cf7259e0.js"><link rel="prefetch" href="/assets/index.html.8c413686.js"><link rel="prefetch" href="/assets/index.html.9a4d01d2.js"><link rel="prefetch" href="/assets/index.html.5a1eef6f.js"><link rel="prefetch" href="/assets/index.html.2861611f.js"><link rel="prefetch" href="/assets/index.html.6b2b1335.js"><link rel="prefetch" href="/assets/index.html.7fc60ea7.js"><link rel="prefetch" href="/assets/index.html.945e95ed.js"><link rel="prefetch" href="/assets/index.html.1529076c.js"><link rel="prefetch" href="/assets/index.html.7862ac2c.js"><link rel="prefetch" href="/assets/index.html.e7f1885d.js"><link rel="prefetch" href="/assets/index.html.e8878259.js"><link rel="prefetch" href="/assets/index.html.30adfa98.js"><link rel="prefetch" href="/assets/index.html.cf9f2e9a.js"><link rel="prefetch" href="/assets/index.html.343f1c22.js"><link rel="prefetch" href="/assets/index.html.9ceea280.js"><link rel="prefetch" href="/assets/index.html.30ee3239.js"><link rel="prefetch" href="/assets/reco-valine.ed4545b0.js">
    <link rel="stylesheet" href="/assets/style.8e5b1768.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper no-sidebar"><div><header class="navbar-container"><span class="nav-item site-brand"><a href="/" class=""><img class="logo" src="/logo.png" alt="database of memory"><span class="site-name can-hide">database of memory</span></a></span><div class="nav-item navbar-links-wrapper" style=""><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Categories">Categories <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Categories"><span class="title"><span>Categories</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tags">Tags <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Tags"><span class="title"><span>Tags</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Docs">Docs <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Docs"><span class="title"><span>Docs</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/docs/leetcode/" class="nav-link" aria-label="leetcode from scratch"><!--[--><!--]--> leetcode from scratch <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blogs/other/guide" class="nav-link" aria-label="vuepress-theme-reco"><!--[--><!--]--> vuepress-theme-reco <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a><a class="icon-container left btn-toggle-menus" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="19" r="1"></circle><circle cx="12" cy="5" r="1"></circle></g></svg><!----></a></div></header><div class="mobile-menus-container"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/" class="nav-link" aria-label="Home"><!--[--><!--]--> Home <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Categories">Categories <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Categories"><span class="title"><span>Categories</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Tags">Tags <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Tags"><span class="title"><span>Tags</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><!--]--></ul></div></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="Docs">Docs <span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="Docs"><span class="title"><span>Docs</span></span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/docs/leetcode/" class="nav-link" aria-label="leetcode from scratch"><!--[--><!--]--> leetcode from scratch <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/blogs/other/guide" class="nav-link" aria-label="vuepress-theme-reco"><!--[--><!--]--> vuepress-theme-reco <!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--></nav><div class="appearance"><span>Appearance </span><a class="icon-container left btn-toggle-dark-mode" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:19px;height:19px;font-size:19px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3h.393a7.5 7.5 0 0 0 7.92 12.446A9 9 0 1 1 12 2.992z"></path><path d="M17 4a2 2 0 0 0 2 2a2 2 0 0 0-2 2a2 2 0 0 0-2-2a2 2 0 0 0 2-2"></path><path d="M19 11h2m-1-1v2"></path></g></svg><!----></a></div></div><div class="sidebar-mask"></div><aside class="series-container"><!--[--><!--]--></aside><!--[--><main class="page-container show-catalog"><h1 class="page-title">位运算基本操作与常用技巧</h1><div class="page-info"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="7" r="4"></circle><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->hujunjie<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 7v5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->2022-10-24<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->算法<!--]--></span></a><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="8.5" cy="8.5" r="1" fill="currentColor"></circle><path d="M4 7v3.859c0 .537.213 1.052.593 1.432l8.116 8.116a2.025 2.025 0 0 0 2.864 0l4.834-4.834a2.025 2.025 0 0 0 0-2.864L12.29 4.593A2.025 2.025 0 0 0 10.859 4H7a3 3 0 0 0-3 3z"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->位运算<!--]--></span></a><!----></div><div class="theme-reco-default-content"><div><h3 id="什么是位运算" tabindex="-1"><a class="header-anchor" href="#什么是位运算" aria-hidden="true">#</a> 什么是位运算</h3><p>位操作（Bit Manipulation）是程序设计中对位模式或二进制数的一元和二元操作。 在许多古老的微处理器上，位运算比加减运算略快，通常位运算比乘除法运算要快很多。 在现代编程语言中，情况并非如此，很多编程语言的解释器都会基本的运算进行了优化， 因此我们在实际开发中可以不必做一些编译器已经帮我们做好的优化， 而就写出代码本身所要表现的意思。</p><h3 id="前置知识" tabindex="-1"><a class="header-anchor" href="#前置知识" aria-hidden="true">#</a> 前置知识</h3><p><strong>计算机内部的数值</strong></p><ul><li><a href="https://baike.baidu.com/item/%E5%AE%9A%E7%82%B9%E6%95%B0?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">定点数<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://baike.baidu.com/item/%E5%8E%9F%E7%A0%81/1097586?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">原码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://baike.baidu.com/item/%E5%8F%8D%E7%A0%81/769985?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">反码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://baike.baidu.com/item/%E8%A1%A5%E7%A0%81?fromModule=lemma_inlink" target="_blank" rel="noopener noreferrer">补码<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h3 id="基本的位运算操作" tabindex="-1"><a class="header-anchor" href="#基本的位运算操作" aria-hidden="true">#</a> 基本的位运算操作</h3><ol><li><code>&amp;</code> 与， 两个位都为1时，结果才为1</li><li><code>|</code> 或， 两个都为0时，结果才为0</li><li><code>^</code> 异或, 两个位相同为0， 相异为1</li><li><code>~</code> 取反，0变1，1变0</li><li><code>&lt;&lt;</code> 左移，各个二进位全部左移若干位，高位丢弃，低位补0</li><li><code>&gt;&gt;</code> 右移，各二进位全部右移若干位，对无符号数，高位补0，有符号数， 各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移）</li></ol><h3 id="算法常用技巧" tabindex="-1"><a class="header-anchor" href="#算法常用技巧" aria-hidden="true">#</a> 算法常用技巧</h3><ol><li>除法<br><code>a &gt;&gt; i</code> a 除以 2 的<code>i</code> 次方</li><li>乘法<br><code>a &lt;&lt; i</code> a 乘以 2 的<code>i</code> 次方</li><li>判断奇偶数<br><code>a &amp; 1</code> 变量<code>a</code>的最后一个二进制位值</li><li>统计二进制中1的个数 <code>a &amp; (a - 1)</code> 将变量<code>a</code>的二进制位最后一个1置0</li><li>查看第<code>i</code>个二进制位是否为1 (值为1或0)<br><code>(a &gt;&gt; i) &amp; 1</code></li><li>不用临时变量交换两个数</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>a ^= b
b ^= a
a ^= b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="7"><li>取最后一个为1的位数()</li></ol><div class="language-python3 ext-python3 line-numbers-mode"><pre class="language-python3"><code>a = 4
mask = a &amp; -a
# 也可这样实现
ret = 1
while a &amp; ret == 0:   # 从最低位开始按位与，如果当前为1则break，拿到的ret即为最后一个为1的数
    ret &lt;&lt;= 1
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>负数的补码展示是反码加一<br> 比如 <code>00000000 00000000 00000000 00000100</code> 原码4<br> 反码是所有取反<br><code>11111111 11111111 11111111 11111011</code><br> 补码 加一<br><code>11111111 11111111 11111111 11111100</code> -4的补码展示 取 4 &amp; -4 就会拿到最后为1的值，为<code>00000000 00000000 00000000 00000100</code>即4，<br> 前面再多个几个1，都是反码会被消掉</p></div><h3 id="技巧活用" tabindex="-1"><a class="header-anchor" href="#技巧活用" aria-hidden="true">#</a> 技巧活用</h3><ol><li><a href="https://leetcode.cn/problems/bu-yong-jia-jian-cheng-chu-zuo-jia-fa-lcof/" target="_blank" rel="noopener noreferrer">leetcode题目 不使用运算符实现加法<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>Python，Java 等语言中的数字都是以 补码 形式存储的。但 Python 没有 int , long 等不同长度变量，即在编程时无变量位数的概念。 获取负数的补码： 需要将数字与十六进制数 0xffffffff 相与。可理解为舍去此数字 32 位以上的数字（将 32 位以上都变为 000 ），从无限长度变为一个 32 位整数。 返回前数字还原： 若补码 aaa 为负数（ 0x7fffffff 是最大的正数的补码 ），需执行 ~(a ^ x) 操作，将补码还原至 Python 的存储格式。 a ^ x 运算将 1 至 32 位按位取反； ~ 运算是将整个数字取反；因此， ~(a ^ x) 是将 32 位以上的位取反，1 至 32 位不变。</p></div><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z"></path><path d="M10 13l-1 2l1 2"></path><path d="M14 13l1 2l-1 2"></path></g></svg><span style="color:inherit;font-size:12px;" class="icon-text"><!--[-->python3<!--]--></span></a></button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z"></path><path d="M10 13l-1 2l1 2"></path><path d="M14 13l1 2l-1 2"></path></g></svg><span style="color:inherit;font-size:12px;" class="icon-text"><!--[-->go<!--]--></span></a></button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code>a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">,</span> <span class="token number">456</span>
x <span class="token operator">=</span> <span class="token number">0xffffffff</span>
a<span class="token punctuation">,</span> b <span class="token operator">=</span> x<span class="token operator">&amp;</span>a<span class="token punctuation">,</span> x<span class="token operator">&amp;</span>b    <span class="token comment"># 32位以上的数字置为0 获取负数补码</span>

<span class="token keyword">while</span> b <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
    carry <span class="token operator">=</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span> <span class="token operator">&amp;</span> x   <span class="token comment"># a &amp; b （两者都为1的时候进位）</span>
    a <span class="token operator">^</span><span class="token operator">=</span> b                     <span class="token comment"># 除进位条件下其余满足加法运算 0^0=0,0^1=1</span>
    b <span class="token operator">=</span> carry                      <span class="token comment"># 将所有需要进位的当做b，仅需进行上述运算，直至b为0</span>
a <span class="token operator">=</span> a <span class="token keyword">if</span> a <span class="token operator">&lt;=</span> x <span class="token keyword">else</span> <span class="token operator">~</span><span class="token punctuation">(</span>a <span class="token operator">^</span> x<span class="token punctuation">)</span>    <span class="token comment"># 负数 32位以上取反， 1至32位不变</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">add</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> b <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        carry <span class="token operator">:=</span> <span class="token punctuation">(</span>a <span class="token operator">&amp;</span> b<span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">1</span>
        a <span class="token operator">^=</span> b
        b <span class="token operator">=</span> carry
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> a
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div><ol start="2"><li><a href="https://leetcode.cn/problems/shu-zu-zhong-shu-zi-chu-xian-de-ci-shu-lcof/" target="_blank" rel="noopener noreferrer">leetcode 剑指 Offer 56 - I. 数组中数字出现的次数<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ol><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><ol><li>两个相同的数异或值为0</li><li>技巧7拿到最后一个不同的数</li><li>将两个出现一次的数字分成两组</li></ol></div><div class="code-group"><div class="code-group__nav"><ul class="code-group__ul"><li class="code-group__li"><button class="code-group__nav-tab code-group__nav-tab-active" ariapressed="true" ariaexpanded="true"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z"></path><path d="M10 13l-1 2l1 2"></path><path d="M14 13l1 2l-1 2"></path></g></svg><span style="color:inherit;font-size:12px;" class="icon-text"><!--[-->python<!--]--></span></a></button></li><li class="code-group__li"><button class="code-group__nav-tab" ariapressed="false" ariaexpanded="false"><a class="icon-container left" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:18px;height:18px;font-size:18px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 3v4a1 1 0 0 0 1 1h4"></path><path d="M17 21H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h7l5 5v11a2 2 0 0 1-2 2z"></path><path d="M10 13l-1 2l1 2"></path><path d="M14 13l1 2l-1 2"></path></g></svg><span style="color:inherit;font-size:12px;" class="icon-text"><!--[-->go<!--]--></span></a></button></li></ul></div><!--[--><div class="code-group-item" aria-selected="false"><!--[--><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> functools
<span class="token keyword">from</span> typing <span class="token keyword">import</span> <span class="token operator">*</span>
<span class="token keyword">class</span> <span class="token class-name">Solution</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">singleNumbers</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> nums<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
        ans <span class="token operator">=</span> functools<span class="token punctuation">.</span><span class="token builtin">reduce</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> x<span class="token punctuation">,</span> y<span class="token punctuation">:</span>x<span class="token operator">^</span>y<span class="token punctuation">,</span> nums<span class="token punctuation">)</span>
        ret <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">while</span> ans <span class="token operator">&amp;</span> ret <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            ret <span class="token operator">&lt;&lt;</span><span class="token operator">=</span> <span class="token number">1</span>
        x<span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span>
        <span class="token keyword">for</span> num <span class="token keyword">in</span> nums<span class="token punctuation">:</span>
            <span class="token keyword">if</span> num <span class="token operator">&amp;</span> ret<span class="token punctuation">:</span>
                x <span class="token operator">^</span><span class="token operator">=</span> num
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                y <span class="token operator">^</span><span class="token operator">=</span> num
        <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><div class="code-group-item" aria-selected="false"><!--[--><div class="language-go ext-go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">singleNumbers</span><span class="token punctuation">(</span>nums <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">{</span>
	tmp <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		tmp <span class="token operator">^=</span> num
	<span class="token punctuation">}</span>
	mask <span class="token operator">:=</span> tmp <span class="token operator">&amp;</span> <span class="token punctuation">(</span><span class="token operator">-</span>tmp<span class="token punctuation">)</span>
	ans <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
		<span class="token keyword">if</span> mask<span class="token operator">&amp;</span>num <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			ans<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">^=</span> num
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			ans<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">^=</span> num
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> ans
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><!--]--></div><!--]--></div></div></div><footer class="page-meta"><div class="meta-item edit-link"><a class="icon-container left meta-item-label" href="https://github.com/12306hujunjie/blog/edit/master/src/blogs/algorithm/bitwise_operation.md" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 7H6a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2-2v-3"></path><path d="M9 15h3l8.5-8.5a1.5 1.5 0 0 0-3-3L9 12v3"></path><path d="M16 5l3 3"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->Edit this page<!--]--></span></a></div><div class="meta-item last-updated"><a class="icon-container left meta-item-label" href="javascript:void(0)" target="_self"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24" style="color:inherit;width:20px;height:20px;font-size:20px;"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.795 21H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v4"></path><circle cx="18" cy="18" r="4"></circle><path d="M15 3v4"></path><path d="M7 3v4"></path><path d="M3 11h16"></path><path d="M18 16.496V18l1 1"></path></g></svg><span style="color:inherit;font-size:14px;" class="icon-text"><!--[-->更新于 2025-07-07 15:54:29<!--]--></span></a></div></footer><!----><div class="reco-valine-wrapper" style="display:block;"><div id="valine"></div></div></main><!--]--><div class="page-catalog-container"><h5 class="tip">目录</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/algorithm/bitwise_operation.html#什么是位运算" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="什么是位运算"><!--[--><!--]--> 什么是位运算 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/algorithm/bitwise_operation.html#前置知识" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="前置知识"><!--[--><!--]--> 前置知识 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/algorithm/bitwise_operation.html#基本的位运算操作" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="基本的位运算操作"><!--[--><!--]--> 基本的位运算操作 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/algorithm/bitwise_operation.html#算法常用技巧" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="算法常用技巧"><!--[--><!--]--> 算法常用技巧 <!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/algorithm/bitwise_operation.html#技巧活用" class="router-link-active router-link-exact-active nav-link page-catalog-item" aria-label="技巧活用"><!--[--><!--]--> 技巧活用 <!--[--><!--]--></a></li><!--]--><!--]--></ul></div></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app.05a3b675.js" defer></script>
  </body>
</html>
