<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/mermaid@11.4.1/dist/mermaid.min.js" as="script"><title>runc 概述与架构 | database of memory</title><meta name="description" content="study anything and life record">
    <link rel="preload" href="/blog/assets/style-3Js8NCR5.css" as="style"><link rel="stylesheet" href="/blog/assets/style-3Js8NCR5.css">
    <link rel="modulepreload" href="/blog/assets/app-6X7aTgdN.js"><link rel="modulepreload" href="/blog/assets/01-runcgaishuyujiagou.html-QDM-MnSj.js">
    <link rel="prefetch" href="/blog/assets/timeline.html-DqGpz6zD.js" as="script"><link rel="prefetch" href="/blog/assets/posts.html-D7Bvy0d7.js" as="script"><link rel="prefetch" href="/blog/assets/friendship-link.html-BeuJvd9N.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Chuj08UQ.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CAiUFWts.js" as="script"><link rel="prefetch" href="/blog/assets/2.html-D37ih9Uu.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-B7r5o5tl.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Bk-Ur-c2.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BoqA-Ln0.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CePHWKeW.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DrJSOmlA.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-U1rZfE85.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CTD9OTnI.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-ClxupEHP.js" as="script"><link rel="prefetch" href="/blog/assets/2.html-qlkAfAwM.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Bcv-xUWV.js" as="script"><link rel="prefetch" href="/blog/assets/2.html-k8qqQK3e.js" as="script"><link rel="prefetch" href="/blog/assets/3.html-CDYIBSbu.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-C9Nfp7Ay.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CjHzGOJ-.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CYNCZ_rK.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BcBA7pf2.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Bs4xEXI5.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-M__IdVLb.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BH3X1mh_.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BHb1grF4.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Brifmhtt.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-qwpDWejy.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-C1gJL2lV.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-U6_-H0Sh.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-LhfHHy5S.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-C-LkskE-.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DmhkJd-t.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BCtbHwdB.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DiSqFikV.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Ggy9-9RW.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DHzX2MiW.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Y_MjXMva.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Dfh-jUGd.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Dj3i--SL.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-jFYTncAL.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CEVzFokr.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CQO4krTi.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-kJCQem_o.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CptdwrQ-.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BZ8F9Q78.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CO2Lqb20.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-B3vfuGqd.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-D0Hq0dy6.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BaR09h1V.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-B0dHEN0C.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DxeVe2QE.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-B-kJe58I.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-bmqWX6zb.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BebdTN1L.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BwMJ76N1.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CTduS54Q.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Dcc4oMtL.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Cuqf1HeB.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-D7mC1WDN.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-v6nZ1ZWL.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BPZMg7Ne.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DxoNufPU.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BZBwiKs9.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-C_-Xixh1.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BnQNYAZB.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BE0yJYJV.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CEWENM8H.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-XtMtCj0R.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CrwupWzR.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CWANwt8I.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-0cS3PG1a.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-SjppBNSL.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CHykDJHD.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Dtk_YvDI.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-fpyujYmI.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BFxeIDyb.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CKHvNVKM.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DIUFuATR.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BtIyxRUq.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-D4v3h6Vg.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-FIb6d2j_.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BaLNiMq6.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Bdo9dHNd.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-1AGwP5Te.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CKMLoDjE.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BJHQObic.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BCpqeqgO.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-jC2ZrfN-.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-vWaMPMS8.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-BEVoBKhp.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-Do1Zlsl6.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-CPVc_dd4.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-DWViIrax.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-RQjr3Fnf.js" as="script"><link rel="prefetch" href="/blog/assets/1.html-dD1j4CIg.js" as="script"><link rel="prefetch" href="/blog/assets/2.html-CS7SB9DU.js" as="script"><link rel="prefetch" href="/blog/assets/3.html-ft_1EMsZ.js" as="script"><link rel="prefetch" href="/blog/assets/4.html-QiRa9oJ7.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-BAQynWuW.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-KC4P4b0V.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-BE8vwrI8.js" as="script"><link rel="prefetch" href="/blog/assets/bitwise_operation.html-CGQUwYxj.js" as="script"><link rel="prefetch" href="/blog/assets/learning_algorithm.html-DI9nJoC0.js" as="script"><link rel="prefetch" href="/blog/assets/cache_pattern.html-Dl3pGg-V.js" as="script"><link rel="prefetch" href="/blog/assets/docker_tech.html-C6Pxm_Pq.js" as="script"><link rel="prefetch" href="/blog/assets/k3s.html-SJowENbd.js" as="script"><link rel="prefetch" href="/blog/assets/k3s_k8s_ingress.html-BLEzHFNF.js" as="script"><link rel="prefetch" href="/blog/assets/oci-01-intro-guide.html-DPFVTs4y.js" as="script"><link rel="prefetch" href="/blog/assets/oci-02-runtime-spec.html-qS0CXXyx.js" as="script"><link rel="prefetch" href="/blog/assets/oci-03-image-spec.html-TDvk0Tea.js" as="script"><link rel="prefetch" href="/blog/assets/oci-04-distribution-spec.html-6IAzcDD0.js" as="script"><link rel="prefetch" href="/blog/assets/oci-05-security-guide.html-Cc6Cssbq.js" as="script"><link rel="prefetch" href="/blog/assets/oci-06-monitoring-guide.html-CvtfFvF0.js" as="script"><link rel="prefetch" href="/blog/assets/oci-07-production-guide.html-n2TaAX2U.js" as="script"><link rel="prefetch" href="/blog/assets/oci-08-hooks-deep-dive.html-C7B2kQ6J.js" as="script"><link rel="prefetch" href="/blog/assets/oci-linux-configurations-blog.html-DwrOQxhi.js" as="script"><link rel="prefetch" href="/blog/assets/oci-series-index.html-DRCITB_S.js" as="script"><link rel="prefetch" href="/blog/assets/runc-container-lifecycle-diagrams.html-BAc1MNwt.js" as="script"><link rel="prefetch" href="/blog/assets/linux_namespace.html-jiIEKnFi.js" as="script"><link rel="prefetch" href="/blog/assets/python_checklist.html-s6uOrY8u.js" as="script"><link rel="prefetch" href="/blog/assets/python_env_manage.html-BSV_lFtV.js" as="script"><link rel="prefetch" href="/blog/assets/gevent.html-CA1arPDM.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-DkNYT3Zm.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-D9psQpTb.js" as="script"><link rel="prefetch" href="/blog/assets/fullstack.html-Dv-FNS3q.js" as="script"><link rel="prefetch" href="/blog/assets/sort_1.html-W70lVzfg.js" as="script"><link rel="prefetch" href="/blog/assets/02-rongqishengmingzhouqiguanli.html-0v7Ls9cX.js" as="script"><link rel="prefetch" href="/blog/assets/03-Namespacegelishixian.html-Dg1Vp7rK.js" as="script"><link rel="prefetch" href="/blog/assets/04-Cgroupsziyuanguanli.html-BgjFfgpp.js" as="script"><link rel="prefetch" href="/blog/assets/05-wenjianxitongyuguazaiguanli.html-CqMH5NWU.js" as="script"><link rel="prefetch" href="/blog/assets/06-anquantexingshixian.html-CVCalXw5.js" as="script"><link rel="prefetch" href="/blog/assets/07-CRIUjianchadianyuhuifu.html-DliOwtSW.js" as="script"><link rel="prefetch" href="/blog/assets/08-tongxinyujiankongxitong.html-CGPnknuZ.js" as="script"><link rel="prefetch" href="/blog/assets/09-goujianjianhuarongqiyunxingshi.html-CpW0Ergx.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-CEju9IkR.js" as="script"><link rel="prefetch" href="/blog/assets/python-async-mastery.html-CSosiE7a.js" as="script"><link rel="prefetch" href="/blog/assets/abstract_factory.html-CUp2rgGA.js" as="script"><link rel="prefetch" href="/blog/assets/factory_method.html-COdBv8o2.js" as="script"><link rel="prefetch" href="/blog/assets/index.html-Cpj7w3BK.js" as="script"><link rel="prefetch" href="/blog/assets/adapter.html-BkNp5Tfd.js" as="script"><link rel="prefetch" href="/blog/assets/404.html-hxa3gNLp.js" as="script"><link rel="prefetch" href="/blog/assets/Valine.min-VCLvSWzF.js" as="script"><link rel="prefetch" href="/blog/assets/giscus-aTimukGI-DWEKOTfS.js" as="script"><link rel="prefetch" href="/blog/assets/KnowledgeMap-CVNiRhtZ.js" as="script"><link rel="prefetch" href="/blog/assets/MermaidChart-z8ABlZRz.js" as="script"><link rel="prefetch" href="/blog/assets/mermaid.core-9NKgZvfC.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/blog/logo.png" alt="database of memory"><a href="/blog/" class="site-name can-hide">database of memory</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/blog/" class="link" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/blog/categories/cloud-base/1/" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/blog/tags/runc/1/" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/blog/knowledge-map/" class="link" aria-label="知识地图"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->知识地图<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="Docs"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Docs<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="Docs"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Docs<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/blog/docs/leetcode/" class="link" aria-label="leetcode from scratch"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->leetcode from scratch<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blog/docs/design_pattern/" class="link" aria-label="design pattern"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->design pattern<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><li class="social-item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:25px;height:25px;"><path d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2z" fill-rule="evenodd" fill="currentColor"></path></svg></li><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">runc 概述与架构</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->hujunjie<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2025-08-01<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/blog/categories/cloud-base/runc-deep-dive/1.html" class="">cloud-base/runc-deep-dive</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/blog/tags/runc/1.html" class="">runc</a><a href="/blog/tags/yunyuansheng/1.html" class="">云原生</a><a href="/blog/tags/jiagousheji/1.html" class="">架构设计</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h1 id="runc-概述与架构" tabindex="-1"><a class="header-anchor" href="#runc-概述与架构"><span>runc 概述与架构</span></a></h1><blockquote><p><strong>系列导航：</strong> <a class="route-link" href="/blog/blogs/cloud-base/runc-deep-dive/">runc 容器运行时深度解析系列</a> → 第一篇：概述与架构<br><strong>最后更新：</strong> 2024</p></blockquote><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述"><span>概述</span></a></h2><p>runc 是一个轻量级的容器运行时，专注于根据 OCI (Open Container Initiative) 规范创建和运行容器。作为容器生态系统的基础组件，runc 为 Docker、containerd、Podman 等上层工具提供了标准化的容器执行环境。</p><h2 id="定义与特征" tabindex="-1"><a class="header-anchor" href="#定义与特征"><span>定义与特征</span></a></h2><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># runc 的基本使用示例</span></span>
<span class="line">$ runc <span class="token parameter variable">--help</span></span>
<span class="line">NAME:</span>
<span class="line">   runc - Open Container Initiative runtime</span>
<span class="line"></span>
<span class="line">USAGE:</span>
<span class="line">   runc <span class="token punctuation">[</span>global options<span class="token punctuation">]</span> <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>command options<span class="token punctuation">]</span> <span class="token punctuation">[</span>arguments<span class="token punctuation">..</span>.<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>核心特征：</strong></p><ul><li><strong>低层工具</strong> - 不面向终端用户，主要被其他容器引擎调用</li><li><strong>标准兼容</strong> - 实现 OCI Runtime Specification</li><li><strong>Linux 专用</strong> - 仅支持 Linux 系统</li><li><strong>基础组件</strong> - 被 Docker、containerd、Podman 等高层工具使用</li></ul><h2 id="解决的问题" tabindex="-1"><a class="header-anchor" href="#解决的问题"><span>解决的问题</span></a></h2><p>在 runc 出现之前，容器运行时功能通常与容器引擎紧耦合。runc 的出现解决了：</p><ol><li><strong>标准化问题</strong>: 提供统一的容器运行时接口</li><li><strong>解耦问题</strong>: 将容器运行与镜像管理、网络管理分离</li><li><strong>安全问题</strong>: 提供安全的容器隔离机制</li><li><strong>兼容性问题</strong>: 确保不同容器工具的互操作性</li></ol><h2 id="_2-容器技术栈中的位置" tabindex="-1"><a class="header-anchor" href="#_2-容器技术栈中的位置"><span>2. 容器技术栈中的位置</span></a></h2><h3 id="_2-1-容器技术栈架构" tabindex="-1"><a class="header-anchor" href="#_2-1-容器技术栈架构"><span>2.1 容器技术栈架构</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">┌─────────────────────────────────────────────┐</span>
<span class="line">│  用户接口层                                  │</span>
<span class="line">│  docker, podman, kubectl                   │</span>
<span class="line">└─────────────────────┬───────────────────────┘</span>
<span class="line">                      │</span>
<span class="line">┌─────────────────────▼───────────────────────┐</span>
<span class="line">│  容器引擎层                                  │</span>
<span class="line">│  Docker Daemon, Podman, containerd         │</span>
<span class="line">└─────────────────────┬───────────────────────┘</span>
<span class="line">                      │</span>
<span class="line">┌─────────────────────▼───────────────────────┐</span>
<span class="line">│  高层运行时                                  │</span>
<span class="line">│  containerd, CRI-O                         │</span>
<span class="line">└─────────────────────┬───────────────────────┘</span>
<span class="line">                      │</span>
<span class="line">┌─────────────────────▼───────────────────────┐ ← runc 在这里</span>
<span class="line">│  低层运行时                                  │</span>
<span class="line">│  runc, gVisor, Kata Containers             │</span>
<span class="line">└─────────────────────┬───────────────────────┘</span>
<span class="line">                      │</span>
<span class="line">┌─────────────────────▼───────────────────────┐</span>
<span class="line">│  Linux 内核                                 │</span>
<span class="line">│  Namespaces, Cgroups, Capabilities         │</span>
<span class="line">└─────────────────────────────────────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-2-职责分工" tabindex="-1"><a class="header-anchor" href="#_2-2-职责分工"><span>2.2 职责分工</span></a></h3><table><thead><tr><th>层级</th><th>主要职责</th><th>runc 的角色</th></tr></thead><tbody><tr><td>用户接口层</td><td>用户体验、命令行/API</td><td>不直接参与</td></tr><tr><td>容器引擎层</td><td>镜像管理、网络、存储</td><td>被调用执行容器</td></tr><tr><td>高层运行时</td><td>容器生命周期管理</td><td>被调用处理具体执行</td></tr><tr><td><strong>低层运行时</strong></td><td><strong>直接与内核交互</strong></td><td><strong>runc 的核心职责</strong></td></tr><tr><td>Linux 内核</td><td>提供隔离和资源管理</td><td>runc 调用内核功能</td></tr></tbody></table><h2 id="_3-oci-规范与-runc" tabindex="-1"><a class="header-anchor" href="#_3-oci-规范与-runc"><span>3. OCI 规范与 runc</span></a></h2><h3 id="_3-1-oci-规范简介" tabindex="-1"><a class="header-anchor" href="#_3-1-oci-规范简介"><span>3.1 OCI 规范简介</span></a></h3><p>OCI (Open Container Initiative) 定义了容器运行时和镜像格式的标准：</p><ul><li><strong>Runtime Specification</strong>: 定义容器的运行时行为</li><li><strong>Image Specification</strong>: 定义容器镜像格式</li><li><strong>Distribution Specification</strong>: 定义镜像分发协议</li></ul><h3 id="_3-2-oci-bundle-结构" tabindex="-1"><a class="header-anchor" href="#_3-2-oci-bundle-结构"><span>3.2 OCI Bundle 结构</span></a></h3><p>runc 工作的基本单位是 <strong>OCI Bundle</strong>：</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">/container-bundle/</span>
<span class="line">├── config.json          # 容器配置文件 (OCI Runtime Spec)</span>
<span class="line">└── rootfs/              # 容器的根文件系统</span>
<span class="line">    ├── bin/</span>
<span class="line">    ├── etc/</span>
<span class="line">    ├── lib/</span>
<span class="line">    ├── usr/</span>
<span class="line">    └── ...</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="config-json-示例" tabindex="-1"><a class="header-anchor" href="#config-json-示例"><span>config.json 示例</span></a></h4><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;ociVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.2&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;process&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;args&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;/bin/sh&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;cwd&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;env&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><span class="token punctuation">]</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;root&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;rootfs&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;linux&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;namespaces&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">      <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;pid&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;network&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mount&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">{</span><span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;user&quot;</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;memory&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token property">&quot;limit&quot;</span><span class="token operator">:</span> <span class="token number">134217728</span><span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-3-runc-与-oci-规范的关系" tabindex="-1"><a class="header-anchor" href="#_3-3-runc-与-oci-规范的关系"><span>3.3 runc 与 OCI 规范的关系</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">OCI Runtime Spec ──────────→ runc 实现</span>
<span class="line">     │                          │</span>
<span class="line">     │ 定义标准                   │ 具体实现</span>
<span class="line">     │                          │</span>
<span class="line">     ▼                          ▼</span>
<span class="line">config.json ──────解析───→ libcontainer.Config</span>
<span class="line">     │                          │</span>
<span class="line">     │                          │ </span>
<span class="line">     ▼                          ▼</span>
<span class="line">Bundle ──────────运行────→ 实际的容器进程</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-runc-整体架构" tabindex="-1"><a class="header-anchor" href="#_4-runc-整体架构"><span>4. runc 整体架构</span></a></h2><h3 id="_4-1-项目结构概览" tabindex="-1"><a class="header-anchor" href="#_4-1-项目结构概览"><span>4.1 项目结构概览</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">runc/</span>
<span class="line">├── main.go                    # CLI 入口点</span>
<span class="line">├── *.go                      # 各种命令实现 (run.go, create.go 等)</span>
<span class="line">├── libcontainer/             # 核心容器库</span>
<span class="line">│   ├── container.go          # 容器接口定义</span>
<span class="line">│   ├── configs/              # 配置管理</span>
<span class="line">│   ├── process.go            # 进程管理</span>
<span class="line">│   ├── init_linux.go         # 容器初始化</span>
<span class="line">│   ├── nsenter/              # namespace 进入机制</span>
<span class="line">│   └── ...</span>
<span class="line">├── internal/                 # 内部工具函数</span>
<span class="line">└── docs/                     # 文档</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-2-核心架构层次" tabindex="-1"><a class="header-anchor" href="#_4-2-核心架构层次"><span>4.2 核心架构层次</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">┌─────────────────────────────────────────────┐</span>
<span class="line">│              CLI 命令层                      │</span>
<span class="line">│  run, create, start, exec, kill, delete    │</span>
<span class="line">└─────────────────┬───────────────────────────┘</span>
<span class="line">                  │ 命令解析与路由</span>
<span class="line">┌─────────────────▼───────────────────────────┐</span>
<span class="line">│            命令处理层                        │</span>
<span class="line">│     startContainer(), setupSpec()          │</span>
<span class="line">└─────────────────┬───────────────────────────┘</span>
<span class="line">                  │ OCI Bundle 处理</span>
<span class="line">┌─────────────────▼───────────────────────────┐</span>
<span class="line">│          libcontainer 核心层                │</span>
<span class="line">│  Container, Process, Config, Factory       │</span>
<span class="line">└─────────────────┬───────────────────────────┘</span>
<span class="line">                  │ 系统调用封装</span>
<span class="line">┌─────────────────▼───────────────────────────┐</span>
<span class="line">│             Linux 内核层                    │</span>
<span class="line">│   Namespaces, Cgroups, Capabilities        │</span>
<span class="line">└─────────────────────────────────────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-3-关键组件详解" tabindex="-1"><a class="header-anchor" href="#_4-3-关键组件详解"><span>4.3 关键组件详解</span></a></h3><h4 id="a-cli-命令层-main-go" tabindex="-1"><a class="header-anchor" href="#a-cli-命令层-main-go"><span>A. CLI 命令层 (<code>main.go</code>)</span></a></h4><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// main.go 中的关键代码结构</span></span>
<span class="line">app <span class="token operator">:=</span> cli<span class="token punctuation">.</span><span class="token function">NewApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">app<span class="token punctuation">.</span>Name <span class="token operator">=</span> <span class="token string">&quot;runc&quot;</span></span>
<span class="line">app<span class="token punctuation">.</span>Commands <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>cli<span class="token punctuation">.</span>Command<span class="token punctuation">{</span></span>
<span class="line">    runCommand<span class="token punctuation">,</span>        <span class="token comment">// 运行容器</span></span>
<span class="line">    createCommand<span class="token punctuation">,</span>     <span class="token comment">// 创建容器  </span></span>
<span class="line">    startCommand<span class="token punctuation">,</span>      <span class="token comment">// 启动容器</span></span>
<span class="line">    execCommand<span class="token punctuation">,</span>       <span class="token comment">// 在容器中执行命令</span></span>
<span class="line">    killCommand<span class="token punctuation">,</span>       <span class="token comment">// 终止容器</span></span>
<span class="line">    deleteCommand<span class="token punctuation">,</span>     <span class="token comment">// 删除容器</span></span>
<span class="line">    <span class="token comment">// ... 更多命令</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>设计特点</strong>：</p><ul><li>使用 <code>urfave/cli</code> 库构建命令行界面</li><li>每个命令对应一个操作，职责清晰</li><li>统一的参数解析和错误处理</li></ul><h4 id="b-libcontainer-核心库" tabindex="-1"><a class="header-anchor" href="#b-libcontainer-核心库"><span>B. libcontainer 核心库</span></a></h4><p><strong>Container 接口</strong> (<code>libcontainer/container.go:60</code>)：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Container 定义了容器的核心操作接口</span></span>
<span class="line"><span class="token keyword">type</span> Container <span class="token keyword">interface</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 容器状态管理</span></span>
<span class="line">    <span class="token function">ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span></span>
<span class="line">    <span class="token function">State</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>State<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 进程管理</span></span>
<span class="line">    <span class="token function">Run</span><span class="token punctuation">(</span>process <span class="token operator">*</span>Process<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">Start</span><span class="token punctuation">(</span>process <span class="token operator">*</span>Process<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">Signal</span><span class="token punctuation">(</span>signal os<span class="token punctuation">.</span>Signal<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 资源管理</span></span>
<span class="line">    <span class="token function">Set</span><span class="token punctuation">(</span>config <span class="token operator">*</span>configs<span class="token punctuation">.</span>Config<span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line">    <span class="token function">Stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token operator">*</span>Stats<span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 生命周期管理</span></span>
<span class="line">    <span class="token function">Destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">error</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>配置管理</strong> (<code>libcontainer/configs/config.go</code>)：</p><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Config 包含容器的完整配置</span></span>
<span class="line"><span class="token keyword">type</span> Config <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 基础信息</span></span>
<span class="line">    Hostname    <span class="token builtin">string</span></span>
<span class="line">    Domainname  <span class="token builtin">string</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 进程配置</span></span>
<span class="line">    Process     <span class="token operator">*</span>Process</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 资源限制</span></span>
<span class="line">    Cgroups     <span class="token operator">*</span>Cgroup</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 命名空间配置</span></span>
<span class="line">    Namespaces  Namespaces</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 安全配置</span></span>
<span class="line">    Capabilities     <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span></span>
<span class="line">    SeccompConfig    <span class="token operator">*</span>Seccomp</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 挂载点</span></span>
<span class="line">    Mounts      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">*</span>Mount</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="c-进程管理-libcontainer-process-go" tabindex="-1"><a class="header-anchor" href="#c-进程管理-libcontainer-process-go"><span>C. 进程管理 (<code>libcontainer/process.go</code>)</span></a></h4><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// Process 定义了进程的配置和状态</span></span>
<span class="line"><span class="token keyword">type</span> Process <span class="token keyword">struct</span> <span class="token punctuation">{</span></span>
<span class="line">    Args         <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>           <span class="token comment">// 命令行参数</span></span>
<span class="line">    Env          <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span>           <span class="token comment">// 环境变量</span></span>
<span class="line">    Cwd          <span class="token builtin">string</span>             <span class="token comment">// 工作目录</span></span>
<span class="line">    User         <span class="token builtin">string</span>             <span class="token comment">// 用户ID</span></span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// I/O 配置</span></span>
<span class="line">    Stdin        io<span class="token punctuation">.</span>Reader</span>
<span class="line">    Stdout       io<span class="token punctuation">.</span>Writer</span>
<span class="line">    Stderr       io<span class="token punctuation">.</span>Writer</span>
<span class="line">    </span>
<span class="line">    <span class="token comment">// 进程状态</span></span>
<span class="line">    Pid          <span class="token builtin">int</span></span>
<span class="line">    StartTime    time<span class="token punctuation">.</span>Time</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_5-核心工作流程" tabindex="-1"><a class="header-anchor" href="#_5-核心工作流程"><span>5. 核心工作流程</span></a></h2><h3 id="_5-1-容器创建流程" tabindex="-1"><a class="header-anchor" href="#_5-1-容器创建流程"><span>5.1 容器创建流程</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">用户执行: runc create mycontainer</span>
<span class="line">          │</span>
<span class="line">          ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  1. CLI 解析命令和参数              │</span>
<span class="line">│     main() → createCommand.Action() │</span>
<span class="line">└─────────────┬───────────────────────┘</span>
<span class="line">              │</span>
<span class="line">              ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  2. 加载和验证 OCI Bundle           │</span>
<span class="line">│     setupSpec() → 读取 config.json  │</span>
<span class="line">└─────────────┬───────────────────────┘</span>
<span class="line">              │</span>
<span class="line">              ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  3. 转换为 libcontainer 配置        │</span>
<span class="line">│     specconv.CreateLibcontainerConfig│</span>
<span class="line">└─────────────┬───────────────────────┘</span>
<span class="line">              │</span>
<span class="line">              ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  4. 创建容器实例                    │</span>
<span class="line">│     libcontainer.Create()           │</span>
<span class="line">└─────────────┬───────────────────────┘</span>
<span class="line">              │</span>
<span class="line">              ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  5. 初始化进程准备                  │</span>
<span class="line">│     container.Start() → fork()      │</span>
<span class="line">└─────────────┬───────────────────────┘</span>
<span class="line">              │</span>
<span class="line">              ▼</span>
<span class="line">┌─────────────────────────────────────┐</span>
<span class="line">│  6. 设置隔离环境                    │</span>
<span class="line">│     namespaces, cgroups, security   │</span>
<span class="line">└─────────────────────────────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-2-代码执行路径" tabindex="-1"><a class="header-anchor" href="#_5-2-代码执行路径"><span>5.2 代码执行路径</span></a></h3><p>以 <code>runc create</code> 命令为例：</p><ol><li><strong>入口</strong>: <code>main.go:main()</code> → CLI 路由</li><li><strong>命令处理</strong>: <code>create.go:createCommand.Action</code></li><li><strong>配置处理</strong>: <code>utils.go:startContainer()</code> → <code>setupSpec()</code></li><li><strong>容器创建</strong>: <code>libcontainer.Create()</code></li><li><strong>进程启动</strong>: <code>container.Start(process)</code></li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// create.go 中的关键代码</span></span>
<span class="line"><span class="token keyword">var</span> createCommand <span class="token operator">=</span> cli<span class="token punctuation">.</span>Command<span class="token punctuation">{</span></span>
<span class="line">    Name<span class="token punctuation">:</span> <span class="token string">&quot;create&quot;</span><span class="token punctuation">,</span></span>
<span class="line">    Action<span class="token punctuation">:</span> <span class="token keyword">func</span><span class="token punctuation">(</span>context <span class="token operator">*</span>cli<span class="token punctuation">.</span>Context<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// 解析参数</span></span>
<span class="line">        spec<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">setupSpec</span><span class="token punctuation">(</span>context<span class="token punctuation">)</span></span>
<span class="line">        <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">            <span class="token keyword">return</span> err</span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// 创建容器</span></span>
<span class="line">        <span class="token keyword">return</span> <span class="token function">startContainer</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> CT_ACT_CREATE<span class="token punctuation">,</span> spec<span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_6-与其他容器工具的协作" tabindex="-1"><a class="header-anchor" href="#_6-与其他容器工具的协作"><span>6. 与其他容器工具的协作</span></a></h2><h3 id="_6-1-docker-runc" tabindex="-1"><a class="header-anchor" href="#_6-1-docker-runc"><span>6.1 Docker + runc</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">docker run ubuntu:20.04 /bin/bash</span>
<span class="line">       │</span>
<span class="line">       ▼</span>
<span class="line">┌─────────────────┐    ┌──────────────┐    ┌─────────────┐</span>
<span class="line">│   Docker CLI    │───▶│Docker Daemon │───▶│ containerd  │</span>
<span class="line">└─────────────────┘    └──────────────┘    └─────┬───────┘</span>
<span class="line">                                                  │</span>
<span class="line">                       ┌──────────────────────────▼</span>
<span class="line">                       ▼</span>
<span class="line">                  ┌─────────────┐</span>
<span class="line">                  │    runc     │ ← 最终执行容器</span>
<span class="line">                  └─────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>工作分工</strong>：</p><ul><li><strong>Docker CLI</strong>: 用户界面和命令解析</li><li><strong>Docker Daemon</strong>: 镜像管理、网络配置、存储管理</li><li><strong>containerd</strong>: 高层运行时，容器生命周期管理</li><li><strong>runc</strong>: 低层运行时，直接创建和管理容器进程</li></ul><h3 id="_6-2-containerd-runc" tabindex="-1"><a class="header-anchor" href="#_6-2-containerd-runc"><span>6.2 containerd + runc</span></a></h3><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// containerd 调用 runc 的示例</span></span>
<span class="line">task<span class="token punctuation">,</span> err <span class="token operator">:=</span> container<span class="token punctuation">.</span><span class="token function">NewTask</span><span class="token punctuation">(</span>ctx<span class="token punctuation">,</span> cio<span class="token punctuation">.</span><span class="token function">NewCreator</span><span class="token punctuation">(</span>cio<span class="token punctuation">.</span>WithStdio<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> err</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// containerd 内部会调用 runc create</span></span>
<span class="line"><span class="token comment">// 然后调用 runc start</span></span>
<span class="line">err <span class="token operator">=</span> task<span class="token punctuation">.</span><span class="token function">Start</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-3-kubernetes-runc" tabindex="-1"><a class="header-anchor" href="#_6-3-kubernetes-runc"><span>6.3 Kubernetes + runc</span></a></h3><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre><code><span class="line">kubectl run pod</span>
<span class="line">      │</span>
<span class="line">      ▼</span>
<span class="line">┌─────────────┐    ┌─────────────┐    ┌─────────────┐</span>
<span class="line">│  kubelet    │───▶│   CRI-O     │───▶│    runc     │</span>
<span class="line">└─────────────┘    │     或      │    └─────────────┘</span>
<span class="line">                   │ containerd  │</span>
<span class="line">                   └─────────────┘</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_7-实践练习" tabindex="-1"><a class="header-anchor" href="#_7-实践练习"><span>7. 实践练习</span></a></h2><h3 id="_7-1-环境准备" tabindex="-1"><a class="header-anchor" href="#_7-1-环境准备"><span>7.1 环境准备</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1. 克隆 runc 源码</span></span>
<span class="line"><span class="token function">git</span> clone https://github.com/opencontainers/runc.git</span>
<span class="line"><span class="token builtin class-name">cd</span> runc</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 编译 runc</span></span>
<span class="line"><span class="token function">make</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 验证安装</span></span>
<span class="line">./runc <span class="token parameter variable">--version</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-2-创建简单容器" tabindex="-1"><a class="header-anchor" href="#_7-2-创建简单容器"><span>7.2 创建简单容器</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token comment"># 1. 创建工作目录</span></span>
<span class="line"><span class="token function">mkdir</span> /tmp/mycontainer</span>
<span class="line"><span class="token builtin class-name">cd</span> /tmp/mycontainer</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 2. 创建根文件系统</span></span>
<span class="line"><span class="token function">mkdir</span> rootfs</span>
<span class="line"><span class="token builtin class-name">cd</span> rootfs</span>
<span class="line"><span class="token comment"># 复制基础文件系统（可以从 Docker 镜像提取）</span></span>
<span class="line"><span class="token function">docker</span> <span class="token builtin class-name">export</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> create busybox<span class="token variable">)</span></span> <span class="token operator">|</span> <span class="token function">tar</span> <span class="token parameter variable">-C</span> <span class="token builtin class-name">.</span> <span class="token parameter variable">-xf</span> -</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 3. 生成配置文件</span></span>
<span class="line"><span class="token builtin class-name">cd</span> <span class="token punctuation">..</span></span>
<span class="line">runc spec</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 4. 创建容器</span></span>
<span class="line">runc create mycontainer</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 5. 查看容器状态</span></span>
<span class="line">runc state mycontainer</span>
<span class="line"></span>
<span class="line"><span class="token comment"># 6. 启动容器</span></span>
<span class="line">runc start mycontainer</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7-3-代码跟踪练习" tabindex="-1"><a class="header-anchor" href="#_7-3-代码跟踪练习"><span>7.3 代码跟踪练习</span></a></h3><p><strong>任务</strong>: 跟踪 <code>runc create</code> 命令的执行流程</p><ol><li>在 <code>create.go</code> 的 <code>Action</code> 函数中添加日志</li><li>在 <code>utils.go</code> 的 <code>startContainer</code> 函数中添加日志</li><li>观察配置文件的加载和转换过程</li><li>理解 OCI Bundle 到 libcontainer.Config 的转换</li></ol><div class="language-go line-numbers-mode" data-highlighter="prismjs" data-ext="go" data-title="go"><pre><code><span class="line"><span class="token comment">// 在关键位置添加调试信息</span></span>
<span class="line">fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;DEBUG: Loading spec from %s\n&quot;</span><span class="token punctuation">,</span> bundle<span class="token punctuation">)</span></span>
<span class="line">fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;DEBUG: Container config: %+v\n&quot;</span><span class="token punctuation">,</span> config<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_8-思考题" tabindex="-1"><a class="header-anchor" href="#_8-思考题"><span>8. 思考题</span></a></h2><ol><li><p><strong>架构设计</strong>: 为什么 runc 要设计成独立的工具，而不是集成到 Docker 中？</p></li><li><p><strong>标准兼容</strong>: OCI 规范为容器生态带来了什么好处？</p></li><li><p><strong>职责分离</strong>: 对比分析容器引擎 (Docker) 和容器运行时 (runc) 的职责差异。</p></li><li><p><strong>安全考虑</strong>: runc 作为 privileged 进程运行，有什么安全风险？如何缓解？</p></li></ol><h2 id="_9-扩展阅读" tabindex="-1"><a class="header-anchor" href="#_9-扩展阅读"><span>9. 扩展阅读</span></a></h2><ul><li><a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener noreferrer">OCI Runtime Specification<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://containerd.io/docs/getting-started/" target="_blank" rel="noopener noreferrer">containerd Architecture<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener noreferrer">runc 官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li><a href="https://www.kernel.org/doc/Documentation/cgroup-v1/cgroups.txt" target="_blank" rel="noopener noreferrer">Linux Containers 原理<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li></ul><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结"><span>总结</span></a></h2><p>本文介绍了 runc 在容器生态系统中的定位、核心特征、架构设计以及与其他容器工具的协作关系。runc 作为 OCI 规范的参考实现，为容器技术的标准化和互操作性奠定了基础。</p><p><strong>下一篇文章</strong>: <a class="route-link" href="/blog/blogs/cloud-base/runc-deep-dive/02-rongqishengmingzhouqiguanli.html">容器生命周期管理</a> - 深入了解容器的创建、运行、暂停、恢复和销毁的完整流程。</p></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->更新于 8/12/2025, 4:02:36 PM<!--]--></span></span></div></footer><!----><div class="reco-valine-wrapper"><div id="valine"></div></div></div><div class="page-catalog-container"><h5 class="tip">目录</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#概述" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="概述"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->概述<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#定义与特征" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="定义与特征"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->定义与特征<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#解决的问题" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="解决的问题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->解决的问题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_2-容器技术栈中的位置" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2. 容器技术栈中的位置"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2. 容器技术栈中的位置<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_2-1-容器技术栈架构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.1 容器技术栈架构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.1 容器技术栈架构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_2-2-职责分工" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="2.2 职责分工"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2.2 职责分工<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_3-oci-规范与-runc" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3. OCI 规范与 runc"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3. OCI 规范与 runc<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_3-1-oci-规范简介" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.1 OCI 规范简介"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.1 OCI 规范简介<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_3-2-oci-bundle-结构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.2 OCI Bundle 结构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.2 OCI Bundle 结构<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_3-3-runc-与-oci-规范的关系" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="3.3 runc 与 OCI 规范的关系"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->3.3 runc 与 OCI 规范的关系<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_4-runc-整体架构" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4. runc 整体架构"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4. runc 整体架构<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_4-1-项目结构概览" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.1 项目结构概览"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.1 项目结构概览<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_4-2-核心架构层次" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.2 核心架构层次"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.2 核心架构层次<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_4-3-关键组件详解" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="4.3 关键组件详解"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->4.3 关键组件详解<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_5-核心工作流程" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="5. 核心工作流程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->5. 核心工作流程<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_5-1-容器创建流程" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="5.1 容器创建流程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->5.1 容器创建流程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_5-2-代码执行路径" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="5.2 代码执行路径"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->5.2 代码执行路径<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_6-与其他容器工具的协作" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6. 与其他容器工具的协作"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6. 与其他容器工具的协作<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_6-1-docker-runc" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.1 Docker + runc"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.1 Docker + runc<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_6-2-containerd-runc" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.2 containerd + runc"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.2 containerd + runc<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_6-3-kubernetes-runc" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="6.3 Kubernetes + runc"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->6.3 Kubernetes + runc<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_7-实践练习" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="7. 实践练习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->7. 实践练习<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_7-1-环境准备" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="7.1 环境准备"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->7.1 环境准备<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_7-2-创建简单容器" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="7.2 创建简单容器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->7.2 创建简单容器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_7-3-代码跟踪练习" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="7.3 代码跟踪练习"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->7.3 代码跟踪练习<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_8-思考题" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="8. 思考题"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->8. 思考题<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#_9-扩展阅读" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="9. 扩展阅读"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->9. 扩展阅读<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blog/blogs/cloud-base/runc-deep-dive/01-runcgaishuyujiagou.html#总结" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="总结"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->总结<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/blog/assets/app-6X7aTgdN.js" defer></script>
  </body>
</html>
