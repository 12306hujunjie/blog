---
title: python namespace
date: 2019-06-03
tags:
 - linux
 - 虚拟化
categories: 
 - linux
 - namespace
sidebar: auto
---

### Linux 命名空间初步介绍
#### 什么是命名空间
在 Linux 中，命名空间是一种隔离机制，用于隔离系统资源的视图，例如进程 ID、网络接口和文件系统挂载点等。使用命名空间可以创建一种虚拟的环境，在这个环境中，系统资源的视图与整个系统的视图是分离的。这使得应用程序和服务可以在隔离的环境中运行，而不会干扰系统中其他应用程序和服务的运行。

命名空间的种类
Linux 中支持多种类型的命名空间。以下是常用的命名空间类型：

#### PID 命名空间
PID 命名空间用于隔离进程 ID。在一个 PID 命名空间中，每个进程都有一个唯一的 PID，即使在系统的其他命名空间中也是如此。
好的，下面是有关 PID 命名空间的详细信息，包括命令的使用和最佳实践：

##### PID 命名空间详解

PID 命名空间用于隔离进程 ID。在一个 PID 命名空间中，每个进程都有一个唯一的 PID，即使在系统的其他命名空间中也是如此。这使得应用程序和服务可以在隔离的环境中运行，而不会干扰系统中其他应用程序和服务的运行。

##### 创建 PID 命名空间

使用 `unshare` 命令可以创建一个新的 PID 命名空间，例如：

```bash
sudo unshare --pid --fork bash
```

该命令将创建一个新的 bash shell 进程，并在新的 PID 命名空间中运行它。

##### 查看 PID 命名空间

使用 `lsns` 命令可以查看当前系统上所有命名空间的详细信息，例如：

```bash
sudo lsns -p
```

该命令将列出所有命名空间的 PID 和命名空间类型。

##### 在 PID 命名空间中运行应用程序

使用 `nsenter` 命令可以将 shell 进程加入到指定的命名空间中，并在该命名空间中运行应用程序，例如：

```bash
sudo nsenter --pid --target <PID> -- ls -l /proc
```

该命令将进入到指定的 PID 命名空间中，并列出该命名空间中的 /proc 目录。

##### 最佳实践

以下是使用 PID 命名空间的最佳实践：

- 在容器中使用 PID 命名空间，可以避免应用程序和服务之间 PID 的冲突，提高容器的安全性和隔离性。
- 在调试进程时，可以使用 PID 命名空间隔离出要调试的进程，以避免影响其他进程的运行。
- 在测试脚本中，可以使用 PID 命名空间隔离测试用例，以确保测试用例之间的隔离性和独立性。
#### Network 命名空间
网络命名空间用于隔离网络资源，例如网络接口、IP 地址和路由表等。在一个网络命名空间中，应用程序和服务可以拥有它们自己的网络视图，而不会干扰其他命名空间中的网络。

#### Mount 命名空间
挂载命名空间用于隔离文件系统挂载点。在一个挂载命名空间中，应用程序和服务可以拥有它们自己的文件系统视图，而不会干扰其他命名空间中的文件系统。

#### UTS 命名空间
UTS 命名空间用于隔离主机名和域名。在一个 UTS 命名空间中，应用程序和服务可以拥有它们自己的主机名和域名，而不会干扰其他命名空间中的主机名和域名。

#### IPC 命名空间
IPC 命名空间用于隔离进程间通信（IPC）机制，例如消息队列、信号量和共享内存等。在一个 IPC 命名空间中，应用程序和服务可以拥有它们自己的 IPC 资源，而不会干扰其他命名空间中的 IPC 资源。

#### User 命名空间
用户命名空间用于隔离用户和用户组。在一个用户命名空间中，应用程序和服务可以拥有它们自己的用户和用户组，而不会干扰其他命名空间中的用户和用户组。