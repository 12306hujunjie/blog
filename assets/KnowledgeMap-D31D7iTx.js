import{_ as K,c as k,o as _,a as u,d as M,f as x,v as L,F as P,g as T,t as z,h as B,i as v,j as V,n as Q}from"./app-POvm5W0X.js";const U={name:"KnowledgeMap",setup(){const m=v(""),s=v(""),y=v([]),a=v([]),p=v([]);let g=null;const t=v([]),h=v(null),N=async()=>{var n;try{const i=`${((n=document.querySelector("base"))==null?void 0:n.getAttribute("href"))||"/"}knowledge-data.json`.replace("//","/"),e=await fetch(i);e.ok?(h.value=await e.json(),t.value=h.value.articles||[]):(console.warn("无法加载知识地图数据，使用默认数据"),t.value=D())}catch(l){console.warn("加载知识地图数据失败，使用默认数据:",l),t.value=D()}},D=()=>[{id:"bitwise_operation",title:"位运算技巧",category:"algorithm",tags:["位运算","最佳实践"],path:"/blogs/algorithm/bitwise_operation.html"},{id:"sort_1",title:"排序算法详解",category:"algorithm",tags:["排序"],path:"/blogs/algorithm/array/sort_1.html"},{id:"cache_pattern",title:"缓存模式",category:"cache",tags:["缓存","最佳实践"],path:"/blogs/cache/cache_pattern.html"},{id:"docker_tech",title:"Docker技术",category:"cloud-base",tags:["docker","容器"],path:"/blogs/cloud-base/docker_tech.html"},{id:"k3s",title:"K3S轻量级Kubernetes",category:"cloud-base",tags:["k3s","k8s"],path:"/blogs/cloud-base/k3s.html"},{id:"linux_namespace",title:"Linux命名空间",category:"linux",tags:["linux","虚拟化"],path:"/blogs/linux/linux_namespace.html"},{id:"gevent",title:"Gevent源码解析",category:"python-web",tags:["源码解析","flask框架"],path:"/blogs/python-web/gevent.html"},{id:"python_checklist",title:"Python开发清单",category:"python",tags:["checklist"],path:"/blogs/python/python_checklist.html"},{id:"python_env_manage",title:"Python环境管理",category:"python",tags:["环境管理","poetry"],path:"/blogs/python/python_env_manage.html"}],C=()=>{if(!t.value||t.value.length===0)return{nodes:[],edges:[]};if(h.value)return a.value=h.value.nodes,p.value=h.value.edges,y.value=[...new Set(h.value.articles.map(e=>e.category))],{nodes:h.value.nodes,edges:h.value.edges};const n=[],l=[],i={algorithm:"#ff6b6b",cache:"#4ecdc4","cloud-base":"#45b7d1",linux:"#96ceb4","python-web":"#feca57",python:"#ff9ff3",design_pattern:"#54a0ff",编程基础:"#54a0ff",项目说明:"#95a5a6",uncategorized:"#95a5a6"};t.value.forEach(e=>{n.push({id:e.id,label:e.title,title:`分类: ${e.category}
标签: ${e.tags.join(", ")}
点击查看详情`,color:i[e.category]||"#95a5a6",category:e.category,tags:e.tags,path:e.path,physics:!0})});for(let e=0;e<t.value.length;e++)for(let o=e+1;o<t.value.length;o++){const d=t.value[e],r=t.value[o];let c=0;d.category===r.category&&(c+=4);const f=d.tags.filter(b=>r.tags.includes(b)),w=["最佳实践","checklist","工具","教程"],S=f.filter(b=>!w.includes(b));c+=S.length*3,c+=(f.length-S.length)*1,c>=3&&l.push({from:d.id,to:r.id,width:Math.min(c,5),length:200-c*20,title:`关联强度: ${c}
共同标签: ${f.join(", ")}`})}return a.value=n,p.value=l,y.value=[...new Set(t.value.map(e=>e.category))],{nodes:n,edges:l}},E=()=>{if(typeof window>"u")return;const n=document.createElement("script");n.src="https://unpkg.com/vis-network@latest/dist/vis-network.min.js",n.onload=()=>{const{nodes:l,edges:i}=C(),e=document.getElementById("knowledge-network");if(!e)return;const o={nodes:new vis.DataSet(l),edges:new vis.DataSet(i)},d={physics:{stabilization:{iterations:100},barnesHut:{gravitationalConstant:-8e3,springConstant:.001,springLength:200}},interaction:{hover:!0,tooltipDelay:300},nodes:{shape:"dot",size:15,font:{size:12,color:"#333"},borderWidth:2,shadow:!0},edges:{color:{inherit:"from"},smooth:{type:"continuous"}}};g=new vis.Network(e,o,d),g.on("click",r=>{if(r.nodes.length>0){const c=r.nodes[0],f=t.value.find(w=>w.id===c);f&&window.open(f.path,"_blank")}})},document.head.appendChild(n)},j=()=>{if(!g)return;const n=m.value?a.value.filter(e=>e.category===m.value):a.value,l=new Set(n.map(e=>e.id)),i=p.value.filter(e=>l.has(e.from)&&l.has(e.to));g.setData({nodes:new vis.DataSet(n),edges:new vis.DataSet(i)})},I=()=>{if(!g)return;const n=s.value.toLowerCase();if(!n){g.setData({nodes:new vis.DataSet(a.value),edges:new vis.DataSet(p.value)});return}const l=a.value.filter(o=>o.label.toLowerCase().includes(n)),i=new Set(l.map(o=>o.id)),e=p.value.filter(o=>i.has(o.from)||i.has(o.to));e.forEach(o=>{if(!i.has(o.from)){const d=a.value.find(r=>r.id===o.from);d&&l.push(d)}if(!i.has(o.to)){const d=a.value.find(r=>r.id===o.to);d&&l.push(d)}}),g.setData({nodes:new vis.DataSet(l),edges:new vis.DataSet(e)})};return V(async()=>{await N(),Q(()=>{E()})}),{selectedCategory:m,searchQuery:s,categories:y,filterNodes:j,searchNodes:I}}},q={class:"knowledge-map"},F={class:"map-controls"},G={class:"filter-section"},A=["value"],H={class:"search-section"};function W(m,s,y,a,p,g){return _(),k("div",q,[u("div",F,[u("div",G,[s[5]||(s[5]=u("label",null,"筛选分类：",-1)),x(u("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>a.selectedCategory=t),onChange:s[1]||(s[1]=(...t)=>a.filterNodes&&a.filterNodes(...t))},[s[4]||(s[4]=u("option",{value:""},"全部",-1)),(_(!0),k(P,null,T(a.categories,t=>(_(),k("option",{key:t,value:t},z(t),9,A))),128))],544),[[L,a.selectedCategory]])]),u("div",H,[x(u("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>a.searchQuery=t),onInput:s[3]||(s[3]=(...t)=>a.searchNodes&&a.searchNodes(...t)),placeholder:"搜索文章标题...",class:"search-input"},null,544),[[B,a.searchQuery]])])]),s[6]||(s[6]=M('<div id="knowledge-network" class="network-container" data-v-98003e00></div><div class="map-legend" data-v-98003e00><h4 data-v-98003e00>图例说明</h4><div class="legend-item" data-v-98003e00><span class="node-example algorithm" data-v-98003e00></span><span data-v-98003e00>算法类</span></div><div class="legend-item" data-v-98003e00><span class="node-example python" data-v-98003e00></span><span data-v-98003e00>Python类</span></div><div class="legend-item" data-v-98003e00><span class="node-example cloud-base" data-v-98003e00></span><span data-v-98003e00>云原生类</span></div><div class="legend-item" data-v-98003e00><span class="node-example other" data-v-98003e00></span><span data-v-98003e00>其他类别</span></div></div>',2))])}const O=K(U,[["render",W],["__scopeId","data-v-98003e00"]]);export{O as default};
