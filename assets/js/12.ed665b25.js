(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{576:function(s,a,t){"use strict";t.r(a);var e=t(13),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"ä¸€-å¿«é€Ÿå®‰è£…"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€-å¿«é€Ÿå®‰è£…"}},[s._v("#")]),s._v(" ä¸€. å¿«é€Ÿå®‰è£…")]),s._v(" "),t("ol",[t("li",[s._v("server å›½å†…å®‰è£…"),t("br"),s._v(" "),t("code",[s._v("curl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn sh -")])]),s._v(" "),t("li",[s._v("server å›½å¤–å®‰è£…"),t("br"),s._v(" "),t("code",[s._v("curl -sfL https://get.k3s.io | sh -")])]),s._v(" "),t("li",[s._v("worker å›½å†…å®‰è£…"),t("br"),s._v(" "),t("code",[s._v("curl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn K3S_URL=${K3S_URL} K3S_TOKEN=${K3S_TOKEN} sh -")])]),s._v(" "),t("li",[s._v("worker å›½å¤–å®‰è£…"),t("br"),s._v(" "),t("code",[s._v("curl -sfL https://get.k3s.io | K3S_URL=${K3S_URL} K3S_TOKEN=${K3S_TOKEN} sh -")])])]),s._v(" "),t("p",[t("strong",[s._v("notice")]),s._v(":")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("worker å®‰è£…å‰å…ˆexportä¸€ä¸‹ç¯å¢ƒå˜é‡"),t("br"),s._v(" "),t("code",[s._v("export K3S_URL=https://110.40.186.64:6443")]),t("br"),s._v(" "),t("code",[s._v("export K3S_TOKEN=xxxxx::server:xxxxx")])])]),s._v(" "),t("li",[t("p",[t("code",[s._v("K3S_TOKEN")]),s._v(" åœ¨serverç¯å¢ƒçš„"),t("code",[s._v("/var/lib/rancher/k3s/server/node-token")]),s._v("è·¯å¾„")])]),s._v(" "),t("li",[t("p",[s._v("æ¯å°è®¡ç®—æœºå¿…é¡»å…·æœ‰å”¯ä¸€çš„ä¸»æœºåã€‚å¦‚æœæ‚¨çš„è®¡ç®—æœºæ²¡æœ‰å”¯ä¸€çš„ä¸»æœºåï¼Œè¯·ä¼ é€’"),t("code",[s._v("K3S_NODE_NAME")]),s._v("ç¯å¢ƒå˜é‡ï¼Œå¹¶ä¸ºæ¯ä¸ªèŠ‚ç‚¹æä¾›ä¸€ä¸ªæœ‰æ•ˆä¸”å”¯ä¸€çš„ä¸»æœºåã€‚")])])]),s._v(" "),t("h3",{attrs:{id:"äºŒã€å…ˆè¿›è¡Œserverç«¯é…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å…ˆè¿›è¡Œserverç«¯é…ç½®"}},[s._v("#")]),s._v(" äºŒã€å…ˆè¿›è¡Œ"),t("code",[s._v("server")]),s._v("ç«¯é…ç½®")]),s._v(" "),t("p",[s._v("ç¼–è¾‘systemdé…ç½®æ–‡ä»¶")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system/k3s-server.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###########################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Lightweight Kubernetes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://k3s.io\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Wants")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network-online.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("notify\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KillMode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("process\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Delegate")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1048576")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitNPROC")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitCORE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TasksMax")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TimeoutStartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStartPre")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-/sbin/modprobe br_netfilter\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStartPre")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-/sbin/modprobe overlay\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/k3s "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    server "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --node-external-ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("public-ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --no-deploy servicelb "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#    --cluster-domain magina.k3s \\")]),s._v("\n    --flannel-backend wireguard "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --kube-proxy-arg "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proxy-mode=ipvs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"masquerade-all=true"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --kube-proxy-arg "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"metrics-bind-address=0.0.0.0"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5s\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br")])]),t("p",[s._v("ä¸»è¦æ˜¯ä¿®æ”¹ "),t("code",[s._v("ExecStart")]),s._v(" å¯åŠ¨å‚æ•°")]),s._v(" "),t("ul",[t("li",[t("code",[s._v("--node-external-ip")]),s._v(": å¦‚æœæ˜¯è·¨äº‘æœåŠ¡, éœ€è¦æŒ‡å®šå…¬ç½‘IP")]),s._v(" "),t("li",[t("code",[s._v("--no-deploy")]),s._v(": ä¸ä½¿ç”¨k3sè‡ªå¸¦çš„è´Ÿè½½å‡è¡¡æ¨¡å—")]),s._v(" "),t("li",[t("code",[s._v("--cluster-domain")]),s._v(": è‡ªå®šä¹‰åŸŸå, å¾®æœåŠ¡ä½¿ç”¨, å¦‚æœä¸æŒ‡å®š, é»˜è®¤"),t("code",[s._v("cluster.local")])]),s._v(" "),t("li",[t("code",[s._v("--flannel-backend")]),s._v(": è¿™é‡Œæˆ‘æ˜¯è·¨å…¬æœ‰äº‘éƒ¨ç½², ä½¿ç”¨"),t("code",[s._v("wireguard")]),s._v("æ¨¡å¼, å¦‚æœæ˜¯å†…ç½‘å¯ä»¥ä¸æŒ‡å®š, é»˜è®¤"),t("code",[s._v("vxlan")])])]),s._v(" "),t("p",[s._v("å¦‚æœä½¿ç”¨"),t("code",[s._v("wireguard")]),s._v("ï¼Œæ³¨æ„æ‰€æœ‰nodeèŠ‚ç‚¹ä¸Šéƒ½è¦å®‰è£…"),t("code",[s._v("wireguard")]),s._v("ï¼Œ "),t("code",[s._v("ubuntu")]),s._v("åªéœ€è¦"),t("code",[s._v("apt-get update")]),s._v(" å¹¶ "),t("code",[s._v("apt-get install wireguard")]),s._v(" å³å¯"),t("br"),s._v("\næ‰§è¡Œå®Œæ¯•åè°ƒç”¨"),t("code",[s._v("systemctl daemon-reload")]),s._v(" å¹¶æ‰§è¡Œ "),t("code",[s._v("systemctl restart k3s")]),s._v(" å³å¯æ›´æ–°é…ç½®")]),s._v(" "),t("h3",{attrs:{id:"ä¸‰ã€æ›´æ–°agenté…ç½®"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€æ›´æ–°agenté…ç½®"}},[s._v("#")]),s._v(" ä¸‰ã€æ›´æ–°"),t("code",[s._v("agent")]),s._v("é…ç½®")]),s._v(" "),t("p",[s._v("ç¼–è¾‘systemdé…ç½®æ–‡ä»¶")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/systemd/system/k3s-agent.service\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("###########################################")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Unit"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Description")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Lightweight Kubernetes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Documentation")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("https://k3s.io\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Wants")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("network-online.target\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Service"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("exec\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("KillMode")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("process\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Delegate")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitNOFILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitNPROC")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LimitCORE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TasksMax")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("infinity\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TimeoutStartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStartPre")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-/sbin/modprobe br_netfilter\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStartPre")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-/sbin/modprobe overlay\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ExecStart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/bin/k3s agent "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --server https://"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("server-ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(":6443 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --token xxxxxx::server:xxxxxx "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --node-external-ip "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("public-ip"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --kube-proxy-arg "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"proxy-mode=ipvs"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"masquerade-all=true"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Restart")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("always\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RestartSec")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("5s\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("Install"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("WantedBy")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("multi-user.target\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br")])]),t("p",[s._v("ä¸»è¦æ˜¯ä¿®æ”¹ "),t("code",[s._v("ExecStart")]),s._v(" å¯åŠ¨å‚æ•°")]),s._v(" "),t("ul",[t("li",[s._v("--server: serveræœåŠ¡çš„è¿æ¥åœ°å€")]),s._v(" "),t("li",[s._v("--node-external-ip: å¦‚æœæ˜¯è·¨äº‘æœåŠ¡, éœ€è¦æŒ‡å®šå…¬ç½‘IP")]),s._v(" "),t("li",[s._v("--token: åœ¨serveræœåŠ¡å™¨ä¸­æŸ¥çœ‹"),t("code",[s._v("cat /var/lib/rancher/k3s/server/token")])])]),s._v(" "),t("h3",{attrs:{id:"å››ã€æ›´æ–°èŠ‚ç‚¹ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€æ›´æ–°èŠ‚ç‚¹ip"}},[s._v("#")]),s._v(" å››ã€æ›´æ–°èŠ‚ç‚¹ip")]),s._v(" "),t("p",[t("code",[s._v("kubectl edit node k3s-server-01")]),t("br"),s._v(" "),t("code",[s._v("metadata:annotations:")]),s._v("åæ·»åŠ ä¸€è¡Œ"),t("br"),s._v(" "),t("code",[s._v("flannel.alpha.coreos.com/public-ip-overwrite: server-public-ip")])]),s._v(" "),t("p",[s._v("è‡³æ­¤å°±å®Œæˆäº†ğŸ‰")]),s._v(" "),t("p",[s._v('kubectl run dig --rm -it --image=rickiechina/dig --overrides=\'{"spec": {"nodeSelector": { "kubernetes.io/hostname": "k3s-worker1" }}}\' -- /bin/sh\ncurl -sfL '),t("a",{attrs:{href:"http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh"),t("OutboundLink")],1),s._v(" | INSTALL_K3S_MIRROR=cn sh  -s -  --node-external-ip 121.5.154.166 --advertise-address 121.5.154.166 --node-ip 10.0.4.10")])])}),[],!1,null,null,null);a.default=n.exports}}]);